Index: src/fr/neyuux/lgthierce/task/NightRunnable.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package fr.neyuux.lgthierce.task;\r\n\r\nimport com.google.gson.JsonObject;\r\nimport com.google.gson.JsonParser;\r\nimport com.mojang.authlib.GameProfile;\r\nimport com.mojang.authlib.properties.Property;\r\nimport fr.neyuux.lgthierce.*;\r\nimport fr.neyuux.lgthierce.role.RCamp;\r\nimport fr.neyuux.lgthierce.role.Roles;\r\nimport net.minecraft.server.v1_8_R3.*;\r\nimport net.minecraft.server.v1_8_R3.PacketPlayOutPlayerInfo.EnumPlayerInfoAction;\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.Location;\r\nimport org.bukkit.Material;\r\nimport org.bukkit.Sound;\r\nimport org.bukkit.block.Block;\r\nimport org.bukkit.craftbukkit.libs.jline.internal.InputStreamReader;\r\nimport org.bukkit.craftbukkit.v1_8_R3.CraftWorld;\r\nimport org.bukkit.craftbukkit.v1_8_R3.entity.CraftPlayer;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.event.inventory.InventoryType;\r\nimport org.bukkit.inventory.Inventory;\r\nimport org.bukkit.inventory.ItemFlag;\r\nimport org.bukkit.inventory.ItemStack;\r\nimport org.bukkit.inventory.meta.ItemMeta;\r\nimport org.bukkit.inventory.meta.SkullMeta;\r\nimport org.bukkit.potion.Potion;\r\nimport org.bukkit.potion.PotionEffect;\r\nimport org.bukkit.potion.PotionEffectType;\r\nimport org.bukkit.potion.PotionType;\r\nimport org.bukkit.scheduler.BukkitRunnable;\r\nimport org.bukkit.scoreboard.Team;\r\n\r\nimport java.io.IOException;\r\nimport java.net.URL;\r\nimport java.util.AbstractMap.SimpleEntry;\r\nimport java.util.*;\r\nimport java.util.Map.Entry;\r\n\r\npublic class NightRunnable extends BukkitRunnable {\r\n\r\n\tprivate final LG main;\r\n\t\r\n\tprivate int currentTimer = Integer.MAX_VALUE;\r\n\tprivate int currentPlayerInPlayerList = 0;\r\n\tpublic static Map<Player, List<EntityPlayer>> fakeplayers = new HashMap<>();\r\n\t\r\n\tpublic NightRunnable(LG main) {\r\n\t\tthis.main = main;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void run() {\r\n\t\t\r\n\t\tif (!main.isCycle(Gcycle.NUIT)) {\r\n\t\t\tcancel();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tif (main.isDisplayState(DisplayState.TOMBEE_DE_LA_NUIT)) {\r\n\t\t\tmain.setDisplayState(DisplayState.DEMARRAGE_DE_LA_NUIT);\r\n\t\t\tif (main.cycleJourNuit) Bukkit.getWorld(\"LG\").setTime(18000);\r\n\t\t}\r\n\t\t\r\n\r\n\t\tif (main.isDisplayState(DisplayState.DEMARRAGE_DE_LA_NUIT) && main.CalledRoles.isEmpty()) {\r\n\t\t\tmain.nights++;\r\n\t\t\tBukkit.broadcastMessage(\"      §9§lNUIT \" + main.nights);\r\n\t\t\tfor (Player player : Bukkit.getOnlinePlayers())\r\n\t\t\t\tplayer.playSound(player.getLocation(), Sound.AMBIENCE_CAVE, 0.4f, 0.1f);\r\n\t\t\tmain.fillCalledRoles();\r\n\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\tfor (Player player : main.players) setSleep(player);\r\n\t\t\tfor (Roles r : main.CalledRoles) {\r\n\t\t\t\tfor (Player player : main.getPlayersByRole(r)) {\r\n\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(false);\r\n\t\t\t\t\tif (!player.hasPotionEffect(PotionEffectType.BLINDNESS)) setSleep(player);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (main.AliveRoles.containsKey(Roles.CHAMAN)) {\r\n\t\t\t\tBukkit.broadcastMessage(main.getPrefix() + main.SendArrow + \"§9Le \" + Roles.CHAMAN.getDisplayName() + \"§9 peut désormais écouter les morts.\");\r\n\t\t\t\tmain.sendRoleMessage(main.getPrefix() + main.SendArrow + \"§aVous pouvez discuter avec les morts : lorsqu'un spectateur enverra un message, vous le recevrez.\", Roles.CHAMAN);\r\n\t\t\t\tif (main.paroleChaman) main.sendRoleMessage(main.getPrefix() + main.SendArrow + \"§aVous pouvez également leur envoyer des messages.\", Roles.CHAMAN);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (main.CalledRoles.isEmpty()) {\r\n\t\t\tmain.days++;\r\n\t\t\tmain.setCycle(Gcycle.JOUR);\r\n\t\t\tmain.setDisplayState(DisplayState.ANNONCES_DES_MORTS_NUIT);\r\n\t\t\tGameRunnable.CURRENT_ANNOUNCE = DisplayState.ANNONCES_DES_MORTS_NUIT;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tfor (Player player : main.sleepingPlayers)\r\n\t\t\tif (!player.isSleeping()) setSleep(player);\r\n\r\n\t\t\tif (main.nights == 1) {\r\n\t\t\t\t\r\n\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.VOLEUR)) {\r\n\t\t\t\t\tif (!main.isDisplayState(DisplayState.NUIT_VOLEUR)) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_VOLEUR);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 21;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tPlayer player = null;\r\n\t\t\t\t\t\tif (main.getPlayersByRole(Roles.VOLEUR).size() > currentPlayerInPlayerList)\r\n\t\t\t\t\t\t\tplayer = main.getPlayersByRole(Roles.VOLEUR).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (player == null) {\r\n\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\tif (p.getInventory().contains(Material.BARRIER)) player = p;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.VOLEUR.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.VOLEUR.getDisplayName()) && !main.playerlg.get(player.getName()).hasUsedPower()) {\r\n\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, InventoryType.HOPPER, \"§6Inv \" + Roles.VOLEUR.getDisplayName());\r\n\t\t\t\t\t\t\tRoles r1 = main.RolesVoleur.get(0);\r\n\t\t\t\t\t\t\tRoles r2 = main.RolesVoleur.get(1);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tItemStack it1 = new ItemStack(Material.MAP, 1, main.getRoleMap(r1).getDurability());\r\n\t\t\t\t\t\t\tItemMeta itm1 = it1.getItemMeta();\r\n\t\t\t\t\t\t\titm1.setDisplayName(r1.getDisplayName());\r\n\t\t\t\t\t\t\titm1.setLore(Arrays.asList(\"§7Vous transforme en \" + r1.getDisplayName() + \"§7.\", \"§7Cela veut dire que vous gagnerez\", \"§7avec le camp de ce rôle.\", \"§7Donc, il n'y aura pas de \" + r2.getDisplayName(), \"§7dans la partie.\", \"\", \"§b>>Clique pour devenir\"));\r\n\t\t\t\t\t\t\titm1.addItemFlags(ItemFlag.HIDE_POTION_EFFECTS);\r\n\t\t\t\t\t\t\tit1.setItemMeta(itm1);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tItemStack it2 = new ItemStack(Material.MAP, 1, main.getRoleMap(r2).getDurability());\r\n\t\t\t\t\t\t\tItemMeta itm2 = it2.getItemMeta();\r\n\t\t\t\t\t\t\titm2.setDisplayName(r2.getDisplayName());\r\n\t\t\t\t\t\t\titm2.setLore(Arrays.asList(\"§7Vous transforme en \" + r2.getDisplayName() + \"§7.\", \"§7Cela veut dire que vous gagnerez\", \"§7avec le camp de ce rôle.\", \"§7Donc, il n'y aura pas de \" + r1.getDisplayName(), \"§7dans la partie.\", \"\", \"§b>>Clique pour devenir\"));\r\n\t\t\t\t\t\t\titm2.addItemFlags(ItemFlag.HIDE_POTION_EFFECTS);\r\n\t\t\t\t\t\t\tit2.setItemMeta(itm2);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tinv.setItem(2, main.getItem(Material.BARRIER, Roles.VOLEUR.getDisplayName(), Arrays.asList(\"§7Vous gardez votre rôle. Vous gagnerez donc\", \"§7avec le Village et les rôles\", r1.getDisplayName() + \" §7et \" + r2.getDisplayName() + \" §7ne seront pas dans la partie.\", \"\", \"§b>>Clique pour devenir\")));\r\n\t\t\t\t\t\t\tinv.setItem(0, it1);\r\n\t\t\t\t\t\t\tinv.setItem(4, it2);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) {\r\n\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) {\r\n\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir. §r\\n§fVotre rôle est désormais \" + Roles.VOLEUR.getDisplayName() + \"§f.\" + \"§fVous êtes comme un Simple Villageois. Cependant, les deux autres rôles que vous n'avez pas choisi ne seront pas dans la partie.\");\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setVoleur(true);\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setCamp(RCamp.VILLAGE);\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setRole(Roles.VOLEUR);\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (main.CalledRoles.contains(main.playerlg.get(player.getName()).getRole())) {\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(false);\r\n\t\t\t\t\t\t\t\tSystem.out.println(1);\r\n\t\t\t\t\t\t\t} else System.out.println(2 + main.playerlg.get(player.getName()).getRole().getName());\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\tplayer.getInventory().remove(Material.BARRIER);\r\n\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.VOLEUR);\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.VOLEUR)) {\r\n\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.CUPIDON)) {\r\n\t\t\t\t\tif(currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_CUPIDON);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 31;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.CUPIDON.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.CUPIDON)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.CUPIDON).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!main.coupleRandom) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.CUPIDON.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.CUPIDON.getDisplayName());\r\n\t\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\t\tItemStack it = new ItemStack(Material.SKULL_ITEM, 1, (short)3);\r\n\t\t\t\t\t\t\t\t\t\t\tSkullMeta itm = (SkullMeta) it.getItemMeta();\r\n\t\t\t\t\t\t\t\t\t\t\titm.setOwner(p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\titm.setDisplayName(\"§d\" + p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\titm.setLore(Arrays.asList(\"§7Mettre en couple §d\" + p.getName() + \"§7.\", \"\", \"§b>>Clique pour sélectionner\"));\r\n\t\t\t\t\t\t\t\t\t\t\tit.setItemMeta(itm);\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(it);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\t\tif (currentTimer == 30) {\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§5Vous avez 30 secondes pour choisir votre couple. Pour faire cela, il suffit de cliquer sur les joueurs voulus.\");\r\n\t\t\t\t\t\t\t\t\t\tif (main.cupiEnCouple) player.sendMessage(main.getPrefix() + main.SendArrow + \"§dVous serez forcément en couple, cela a été paramétré dans la configuration de la partie, vous devez cliquer sur le joueur qui sera votre amant pendant cette partie.\");\r\n\t\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\t\tboolean isCoupleAlive = main.playerlg.get(player.getName()).hasUsedPower();\r\n\r\n\t\t\t\t\t\t\t\t\tif (!isCoupleAlive) {\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir votre Couple. Il n'y aura donc pas de sexe pendant la partie :(\");\r\n\t\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.CUPIDON);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 28) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§dSélection du couple aléatoire...\");\r\n\t\t\t\t\t\t\t\t} else if (currentTimer == 23) {\r\n\t\t\t\t\t\t\t\t\tPlayer p1 = main.players.get(new Random().nextInt(main.players.size()));\r\n\t\t\t\t\t\t\t\t\tif (main.cupiEnCouple) p1 = player;\r\n\t\t\t\t\t\t\t\t\tPlayer p2 = main.players.get(new Random().nextInt(main.players.size()));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (p1.getName().equals(p2.getName())) {\r\n\t\t\t\t\t\t\t\t\t\twhile (p1.getName().equals(p2.getName())) {\r\n\t\t\t\t\t\t\t\t\t\t\tp2 = main.players.get(new Random().nextInt(main.players.size()));\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tPlayerLG p1lg = main.playerlg.get(p1.getName());\r\n\t\t\t\t\t\t\t\t\tPlayerLG p2lg = main.playerlg.get(p2.getName());\r\n\t\t\t\t\t\t\t\t\tp1lg.addCouple(p2);\r\n\t\t\t\t\t\t\t\t\tp2lg.addCouple(p1);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tTeam t = null;\r\n\t\t\t\t\t\t\t\t\tfor (Team team : player.getScoreboard().getTeams()) if (team.getName().startsWith(\"Couple\")) t = team;\r\n\t\t\t\t\t\t\t\t\tTeam t1 = null;\r\n\t\t\t\t\t\t\t\t\tfor (Team team : p1.getScoreboard().getTeams()) if (team.getName().startsWith(\"Couple\")) t1 = team;\r\n\t\t\t\t\t\t\t\t\tTeam t2 = null;\r\n\t\t\t\t\t\t\t\t\tfor (Team team : p2.getScoreboard().getTeams()) if (team.getName().startsWith(\"Couple\")) t2 = team;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tt1.addEntry(p2.getName());\r\n\t\t\t\t\t\t\t\t\tt2.addEntry(p1.getName());\r\n\t\t\t\t\t\t\t\t\tt.addEntry(p1.getName());\r\n\t\t\t\t\t\t\t\t\tt.addEntry(p2.getName());\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tp1.sendMessage(main.getPrefix() + main.SendArrow + \"§dVous recevez soudainement une flèche, elle vous transperce. Regardant au loin, vous apercevez §5\" + p2.getName() + \" §d, vous vous effondrez de joie et remerciez \" + Roles.CUPIDON.getDisplayName() + \" §dpour avoir fait ce choix. §r\\n§dVous êtes amoureux de §5\" + p2.getName() + \" §d, vous devez gagner ensemble et si l'un d'entre-vous meurt, il emporte l'autre avec un chagrin d'amour...\");\r\n\t\t\t\t\t\t\t\t\tp2.sendMessage(main.getPrefix() + main.SendArrow + \"§dVous recevez soudainement une flèche, elle vous transperce. Regardant au loin, vous apercevez §5\" + p1.getName() + \" §d, vous vous effondrez de joie et remerciez \" + Roles.CUPIDON.getDisplayName() + \" §dpour avoir fait ce choix. §r\\n§dVous êtes amoureux de §5\" + p1.getName() + \" §d, vous devez gagner ensemble et si l'un d'entre-vous meurt, il emporte l'autre avec un chagrin d'amour...\");\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§dVos 2 flèches ont transpercé §5\" + main.getPlayerNameByAttributes(p1, player) + \" §det §5\" + main.getPlayerNameByAttributes(p2, player) + \"§d. Ils ne se quitteront plus désormais...\");\r\n\r\n\t\t\t\t\t\t\t\t} else if (currentTimer == 20) {\r\n\t\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.CUPIDON);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.CUPIDON)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.CUPIDON);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.ENFANT_SAUVAGE)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_ES);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 21;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour de l'\" + Roles.ENFANT_SAUVAGE.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.ENFANT_SAUVAGE)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.ENFANT_SAUVAGE).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!main.maitreRandom) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.ENFANT_SAUVAGE.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.ENFANT_SAUVAGE.getDisplayName());\r\n\t\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (!p.getName().equals(player.getName())) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tItemStack it = new ItemStack(Material.SKULL_ITEM, 1, (short)3);\r\n\t\t\t\t\t\t\t\t\t\t\t\tSkullMeta itm = (SkullMeta) it.getItemMeta();\r\n\t\t\t\t\t\t\t\t\t\t\t\titm.setOwner(p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\t\titm.setDisplayName(\"§6\" + p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\t\titm.setLore(Arrays.asList(\"§7Sélectionner le joueur §6\" + p.getName(), \"§7en temps que maître.\", \"\", \"§b>>Clique pour sélectionner\"));\r\n\t\t\t\t\t\t\t\t\t\t\t\tit.setItemMeta(itm);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\tinv.addItem(it);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\t\tif (currentTimer == 20) {\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§6Vous avez 20 secondes pour choisir votre modèle. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\t\tboolean isMaitreAlive = main.playerlg.get(player.getName()).hasUsedPower();\r\n\r\n\t\t\t\t\t\t\t\t\tif (!isMaitreAlive) {\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous n'avez pas choisi de modèle. Il sera donc choisi aléatoirement.\");\r\n\t\t\t\t\t\t\t\t\t\tint rdm = new Random().nextInt(main.players.size());\r\n\t\t\t\t\t\t\t\t\t\tPlayer p = main.players.get(rdm);\r\n\t\t\t\t\t\t\t\t\t\tif (p.equals(player))\r\n\t\t\t\t\t\t\t\t\t\t\twhile (p.equals(player)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\trdm = new Random().nextInt(main.players.size());\r\n\t\t\t\t\t\t\t\t\t\t\t\tp = main.players.get(rdm);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tmain.playerlg.get(p.getName()).addmaitre(player);\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§fVotre modèle est §c\" + p.getName());\r\n\t\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.ENFANT_SAUVAGE);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.ENFANT_SAUVAGE)) {\r\n\t\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tif (currentTimer == 18) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§6Sélection du modèle aléatoire...\");\r\n\t\t\t\t\t\t\t\t} else if (currentTimer == 13) {\r\n\t\t\t\t\t\t\t\t\tPlayer p1 = main.players.get(new Random().nextInt(main.players.size()));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (p1.getName().equals(player.getName())) {\r\n\t\t\t\t\t\t\t\t\t\twhile (p1.getName().equals(player.getName())) {\r\n\t\t\t\t\t\t\t\t\t\t\tp1 = main.players.get(new Random().nextInt(main.players.size()));\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tPlayerLG p1lg = main.playerlg.get(p1.getName());\r\n\t\t\t\t\t\t\t\t\tp1lg.addmaitre(player);\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§e\" + main.getPlayerNameByAttributes(p1, player) + \" §6a été choisi comme modèle.\");\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t} else if (currentTimer == 11) {\r\n\t\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.ENFANT_SAUVAGE);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.ENFANT_SAUVAGE)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.ENFANT_SAUVAGE);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.CHIEN_LOUP)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_CL);\r\n\t\t\t\t\t\tSystem.out.println(main.CalledRoles.toString());\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 21;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.CHIEN_LOUP.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.CHIEN_LOUP)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.CHIEN_LOUP).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.CHIEN_LOUP.getDisplayName())) {\r\n\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, InventoryType.HOPPER, \"§6Inv \" + Roles.CHIEN_LOUP.getDisplayName());\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tinv.setItem(0, main.getItem(Material.BOWL, \"§a§lChien\", Arrays.asList(\"§7Vous transforme en §a§lChien§7.\", \"§7Vous appartiendez donc au camp du Village et devrez\", \"§7éliminer tous les Loups-Garous.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tinv.setItem(4, main.getItem(Material.RABBIT_STEW, \"§c§lLoup\", Arrays.asList(\"§7Vous transforme en §c§lLoup§7.\", \"§7Vous appartiendez donc au camp des Loups-Garous et devrez\", \"§7éliminer les Villageois.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir. Vous serez donc un §a§lChien §cpendant cette partie.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setCamp(RCamp.VILLAGE);\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setChoosenCampCL(main.playerlg.get(player.getName()).getCamp());\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isCamp(RCamp.LOUP_GAROU)) main.playerlg.get(player.getName()).setHasUsedPower(false);\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.CHIEN_LOUP);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.CHIEN_LOUP)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.CHIEN_LOUP)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.CHIEN_LOUP);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\r\n\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.JUMEAU)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_JUMEAU);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\r\n\t\t\t\t\t\tcurrentTimer = 21;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.JUMEAU.getDisplayName());\r\n\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.JUMEAU)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.JUMEAU).get(currentPlayerInPlayerList);\r\n\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.JUMEAU.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.JUMEAU.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\tif (!p.getName().equals(player.getName())) {\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(getHeadItem(p, \"§d\" + p.getName(), Arrays.asList(\"§7Sélectionne §d\" + p.getName() + \" §7comme Jumeau pour cette partie.\", \"§7A sa mort, vous récupérerez son rôle.\", \"§7S'il était infecté, charmé, en couple au autre, vous ne le serez pas.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 20) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§5Vous avez 20 secondes pour sélectionner quelqu'un. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.JUMEAU);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.JUMEAU)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.JUMEAU)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.JUMEAU);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif (main.CalledRoles.get(0).equals(Roles.NOCTAMBULE)) {\r\n\r\n\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_NOCTA);\r\n\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\r\n\t\t\t\t\tcurrentTimer = 23;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.NOCTAMBULE.getDisplayName());\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.NOCTAMBULE)) {\r\n\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.NOCTAMBULE).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.NOCTAMBULE.getDisplayName())) {\r\n\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.NOCTAMBULE.getDisplayName());\r\n\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\tif (!p.getName().equals(player.getName())) {\r\n\t\t\t\t\t\t\t\t\t\tinv.addItem(getHeadItem(p, \"§b\" + p.getName(), Arrays.asList(\"§7Passe la nuit chez §b\" + p.getName() + \"§7.\", \"§7Il connaîtra votre rôle mais il ne pourra pas utiliser son pouvoir de nuit s'il en a.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\tif (currentTimer == 22) {\r\n\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§3Vous avez 22 secondes choisir chez qui passer la nuit. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.NOCTAMBULE);\r\n\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.NOCTAMBULE)) {\r\n\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.NOCTAMBULE)) {\r\n\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.NOCTAMBULE);\r\n\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\telse if (main.CalledRoles.get(0).equals(Roles.COMEDIEN)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_COMEDIEN);\r\n\t\t\t\t\t\tSystem.out.println(\"§d\" + main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 31;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.COMEDIEN.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.COMEDIEN)) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.COMEDIEN).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir. Vous n'aurez donc aucun pouvoir cette nuit.\");\r\n\t\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setComedien(true);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tif (main.playerlg.get(p.getName()).isComedien())\r\n\t\t\t\t\t\t\t\t\t\t\tmain.playerlg.get(p.getName()).setHasUsedPower(false);\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.COMEDIEN);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.COMEDIEN)) {\r\n\t\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.COMEDIEN.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 9, \"§6Inv \" + Roles.COMEDIEN.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(8, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Roles r : main.pouvoirsComedien) {\r\n\t\t\t\t\t\t\t\t\t\tItemStack it = new ItemStack(Material.MAP, 1, main.getRoleMap(r).getDurability());\r\n\t\t\t\t\t\t\t\t\t\tItemMeta itm = it.getItemMeta();\r\n\t\t\t\t\t\t\t\t\t\titm.setDisplayName(r.getDisplayName());\r\n\t\t\t\t\t\t\t\t\t\titm.setLore(Arrays.asList(\"§7Vous donne le pouvoir du rôle \" + r.getDisplayName(), \"§7pour ce tour. Pour ne pourrez donc plus l'utiliser.\", \"\", \"§b>>Clique pour sélectionner\"));\r\n\t\t\t\t\t\t\t\t\t\titm.addItemFlags(ItemFlag.HIDE_POTION_EFFECTS);\r\n\t\t\t\t\t\t\t\t\t\tit.setItemMeta(itm);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tinv.addItem(it);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} catch (Exception err) {\r\n\t\t\t\t\t\t\t\terr.printStackTrace();\r\n\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\tif (main.playerlg.get(p.getName()).isComedien())\r\n\t\t\t\t\t\t\t\t\t\tmain.playerlg.get(p.getName()).setHasUsedPower(false);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.COMEDIEN);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.COMEDIEN)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.COMEDIEN)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.COMEDIEN);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} \r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.VOYANTE)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_VOVO);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 23;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour de la \" + Roles.VOYANTE.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.VOYANTE)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.VOYANTE).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.VOYANTE.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.VOYANTE.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\tif (!p.getName().equals(player.getName())) {\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(getHeadItem(p, \"§d\" + p.getName(), Arrays.asList(\"§7Vous donne le rôle de §d\" + p.getName() + \"§7.\", \"§7Cependant, vous ne saurez pas s'il est infecté ou en couple etc...\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 22) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§5Vous avez 22 secondes pour espionner quelqu'un. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.VOYANTE);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.VOYANTE)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.VOYANTE)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.VOYANTE);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.VOYANTE_D$AURA)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_VOVO_D$AURA);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 23;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour de la \" + Roles.VOYANTE_D$AURA.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.VOYANTE_D$AURA)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.VOYANTE_D$AURA).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.VOYANTE_D$AURA.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.VOYANTE_D$AURA.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tif (!p.getName().equals(player.getName()))\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(getHeadItem(p, \"§d\" + p.getName(), Arrays.asList(\"§7Permet de savoir si §d\" + p.getName() + \"§7 est Loup ou non.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 22) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§5Vous avez 22 secondes pour espionner quelqu'un. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.VOYANTE_D$AURA);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.VOYANTE_D$AURA)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.VOYANTE_D$AURA)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.VOYANTE_D$AURA);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.ENCHANTEUR)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_ENCHANT);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 23;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour de l'\" + Roles.ENCHANTEUR.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.ENCHANTEUR)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.ENCHANTEUR).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.ENCHANTEUR.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.ENCHANTEUR.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\tif (!p.getName().equals(player.getName()) && !player.getScoreboard().getTeam(\"LG\").hasEntry(p.getName())) {\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(getHeadItem(p, \"§d\" + p.getName(), Arrays.asList(\"§7Enchante §d\" + p.getName() + \"§7.\", \"§7Vous saurez s'il appartient au camp des loups ou s'il est voyante.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 22) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§5Vous avez 22 secondes pour enchanter quelqu'un. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.ENCHANTEUR);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.ENCHANTEUR)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.ENCHANTEUR)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.ENCHANTEUR);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.DETECTIVE)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_DETEC);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 29;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.DETECTIVE.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.DETECTIVE)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.DETECTIVE).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.DETECTIVE.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.DETECTIVE.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\tif (!p.getName().equals(player.getName())) {\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(getHeadItem(p, \"§8\" + p.getName(), Arrays.asList(\"§7Inspecte le camp de §8\" + p.getName() + \"§7.\", \"§7Vous devrez choisir une deuxième personne.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 28) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§8Vous avez 28 secondes pour comparer les camps de deux personnes. Pour faire cela, il suffit de cliquer sur les joueurs voulus.\");\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.DETECTIVE);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.DETECTIVE)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.DETECTIVE)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.DETECTIVE);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.RENARD)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_RENARD);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 41;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.RENARD.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.RENARD)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.RENARD).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedDefinitivePower() || player.getInventory().contains(Material.STONE_BUTTON)) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.RENARD.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.RENARD.getDisplayName());\r\n\t\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\tList<String> splayers = new ArrayList<>();\r\n\t\t\t\t\t\t\t\t\t\tint i = 0;\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players) splayers.add(p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tjava.util.Collections.sort(splayers);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tfor (String sp : splayers) {\r\n\t\t\t\t\t\t\t\t\t\t\tItemStack it = new ItemStack(Material.SKULL_ITEM, 1, (short)3);\r\n\t\t\t\t\t\t\t\t\t\t\tSkullMeta itm = (SkullMeta) it.getItemMeta();\r\n\t\t\t\t\t\t\t\t\t\t\tint i2 = i - 1;\r\n\t\t\t\t\t\t\t\t\t\t\tif (i <= 0) i2 = splayers.size() - 1;\r\n\t\t\t\t\t\t\t\t\t\t\tint i3 = i + 1;\r\n\t\t\t\t\t\t\t\t\t\t\tif (i3 >= splayers.size()) i3 = 0;\r\n\t\t\t\t\t\t\t\t\t\t\titm.setOwner(sp);\r\n\t\t\t\t\t\t\t\t\t\t\titm.setDisplayName(\"§e\" + sp);\r\n\t\t\t\t\t\t\t\t\t\t\titm.setLore(Arrays.asList(\"§7Si vous flairez §e\" + sp + \" §7vous conserverez vos pouvoirs\", \"§7si parmis §e\" + sp + \"§7, §e\" + splayers.get(i2) + \" §7et §e\" + splayers.get(i3), \"§7se trouve un §c§lLoup-Garou§7 sinon,\", \"§7vous perdrez vos pouvoirs.\", \"\", \"§b>>Clique pour sélectionner\"));\r\n\t\t\t\t\t\t\t\t\t\t\tit.setItemMeta(itm);\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(it);\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\ti++;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\t\tif (currentTimer == 40) {\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§6Vous avez 40 secondes pour renifler quelqu'un. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\r\n\t\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\t\tif (player.getInventory().contains(Material.STONE_BUTTON)) player.getInventory().remove(Material.STONE_BUTTON);\r\n\t\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.RENARD);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.RENARD)) {\r\n\t\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous n'avez plus de pouvoir.\");\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.RENARD)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.RENARD);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.PACIFISTE)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_PACIF);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 21;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.PACIFISTE.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.PACIFISTE)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.PACIFISTE).get(currentPlayerInPlayerList);\r\n\r\n\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedDefinitivePower() || player.getInventory().contains(Material.STONE_BUTTON)) {\r\n\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.PACIFISTE.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.PACIFISTE.getDisplayName());\r\n\t\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (p.equals(player)) continue;\r\n\t\t\t\t\t\t\t\t\t\t\tItemStack it = new ItemStack(Material.SKULL_ITEM, 1, (short)3);\r\n\t\t\t\t\t\t\t\t\t\t\tSkullMeta itm = (SkullMeta) it.getItemMeta();\r\n\t\t\t\t\t\t\t\t\t\t\titm.setOwner(p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\titm.setDisplayName(\"§d\" + p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\titm.setLore(Arrays.asList(\"§7Si vous sélectionnez §d\" + p.getName() + \", vous\", \"§7allez révéler son rôle à tout le village.\", \"§7Mais il n'y aura pas de vote pendant la journée\", \"\", \"§b>>Clique pour sélectionner\"));\r\n\t\t\t\t\t\t\t\t\t\t\tit.setItemMeta(itm);\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(it);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\t\tif (currentTimer == 20) {\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§5Vous avez 20 secondes pour sélectionner quelqu'un. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\t\tif (player.getInventory().contains(Material.STONE_BUTTON)) player.getInventory().remove(Material.STONE_BUTTON);\r\n\t\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.PACIFISTE);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.PACIFISTE)) {\r\n\t\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous n'avez plus de pouvoir.\");\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.PACIFISTE)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.PACIFISTE);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.FILLE_DE_JOIE)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_FDJ);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 26;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.FILLE_DE_JOIE.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.FILLE_DE_JOIE)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.FILLE_DE_JOIE).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.FILLE_DE_JOIE.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.FILLE_DE_JOIE.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\tItemStack it = new ItemStack(Material.SKULL_ITEM, 1, (short)3);\r\n\t\t\t\t\t\t\t\t\t\tSkullMeta itm = (SkullMeta) it.getItemMeta();\r\n\t\t\t\t\t\t\t\t\t\titm.setOwner(p.getName());\r\n\t\t\t\t\t\t\t\t\t\titm.setDisplayName(\"§5\" + p.getName());\r\n\t\t\t\t\t\t\t\t\t\titm.setLore(Arrays.asList(\"§7Dormir chez §d\" + main.getPlayerNameByAttributes(p, player) + \"§7. Si vous faites cela et\", \"§7que les Loups vous attaquent, vous serez immunisé.\", \"§7Cependant, s'il est Loup ou attaqué par les Loups, vous mourrez.\", \"\", \"§b>>Clique pour sélectionner\"));\r\n\t\t\t\t\t\t\t\t\t\tit.setItemMeta(itm);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tinv.addItem(it);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 25) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§dVous avez 25 secondes pour choisir quelqu'un chez qui dormir. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.FILLE_DE_JOIE);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.FILLE_DE_JOIE)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.FILLE_DE_JOIE)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.FILLE_DE_JOIE);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.GARDE_DU_CORPS)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_GDC);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 21;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.GARDE_DU_CORPS.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.GARDE_DU_CORPS)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.GARDE_DU_CORPS).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.GARDE_DU_CORPS.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.GARDE_DU_CORPS.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\tif (p.equals(player)) continue;\r\n\t\t\t\t\t\t\t\t\t\tItemStack it = new ItemStack(Material.SKULL_ITEM, 1, (short)3);\r\n\t\t\t\t\t\t\t\t\t\tSkullMeta itm = (SkullMeta) it.getItemMeta();\r\n\t\t\t\t\t\t\t\t\t\titm.setOwner(p.getName());\r\n\t\t\t\t\t\t\t\t\t\titm.setDisplayName(\"§6\" + p.getName());\r\n\t\t\t\t\t\t\t\t\t\titm.setLore(Arrays.asList(\"§7Protéger le joueur §e\" + p.getName() + \"§7. Il sera donc\", \"§7protégé pour toute la nuit.\", \"§7Cependant, s'il est censé mourir peu importe la façon,\", \"§7vous mourrez à sa place.\"));\r\n\t\t\t\t\t\t\t\t\t\tit.setItemMeta(itm);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tinv.addItem(it);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 20) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§7Vous avez 20 secondes pour protéger quelqu'un. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.GARDE_DU_CORPS);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.GARDE_DU_CORPS)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.GARDE_DU_CORPS)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.GARDE_DU_CORPS);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.SALVATEUR)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_SALVA);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 21;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.SALVATEUR.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.SALVATEUR)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.SALVATEUR).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.SALVATEUR.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.SALVATEUR.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\tItemStack it = new ItemStack(Material.SKULL_ITEM, 1, (short)3);\r\n\t\t\t\t\t\t\t\t\t\tSkullMeta itm = (SkullMeta) it.getItemMeta();\r\n\t\t\t\t\t\t\t\t\t\titm.setOwner(p.getName());\r\n\t\t\t\t\t\t\t\t\t\titm.setDisplayName(\"§6\" + p.getName());\r\n\t\t\t\t\t\t\t\t\t\titm.setLore(Arrays.asList(\"§7Protéger le joueur §e\" + p.getName() + \"§7. Il sera donc\", \"§7protégé de l'attaque des Loups.\", \"§7Cependant, si la sorcière ou un autre rôle le\", \"§7cible, il mourra tout de même.\"));\r\n\t\t\t\t\t\t\t\t\t\tit.setItemMeta(itm);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tinv.addItem(it);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 20) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§eVous avez 20 secondes pour protéger quelqu'un. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.SALVATEUR);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.SALVATEUR)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.SALVATEUR)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.SALVATEUR);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.LOUP_GAROU)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_LG);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 36;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tList<Player> lgs = new ArrayList<>();\r\n\t\t\t\t\t\tfor (Player player : main.players) {\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isCamp(RCamp.LOUP_GAROU) || main.playerlg.get(player.getName()).isCamp(RCamp.LOUP_GAROU_BLANC))\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).isNoctaTargeted())\r\n\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).isRole(Roles.ENCHANTEUR))\r\n\t\t\t\t\t\t\t\t\t\tlgs.add(player);\r\n\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).showArmorStandOnlyForLG();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour des §c§lLoups-Garous\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!lgs.isEmpty()) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (Player player : lgs) {\r\n\t\t\t\t\t\t\t\tif (main.sleepingPlayers.contains(player)) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tif (main.isType(Gtype.REUNION))\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(2, main.getItem(Material.BOOK, \"§cDévorer un joueur\", Arrays.asList(\"§fOuvre un menu pour dévorer un joueur.\", \"\", \"§b>>Clique pour ouvrir\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (Player player : lgs) if (!player.getInventory().contains(Material.BOOK)) player.getInventory().setItem(2, main.getItem(Material.BOOK, \"§cDévorer un joueur\", Arrays.asList(\"§fOuvre un menu pour dévorer un joueur.\", \"\", \"§b>>Clique pour ouvrir\")));\r\n\t\r\n\t\t\t\t\t\t\tfor (Player player : lgs)\r\n\t\t\t\t\t\t\t\tfor (Player p : lgs) player.showPlayer(p);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(lgs.get(0).getName()).hasUsedPower() && currentTimer > 5) currentTimer = 5;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tList<Entry<Player, Integer>> votes = new ArrayList<>();\r\n\t\t\t\t\t\t\t\tboolean isGrailled = false;\r\n\t\t\t\t\t\t\t\tfor (Player player : main.players) {\r\n\t\t\t\t\t\t\t\t\tSimpleEntry<Player, Integer> se = new SimpleEntry<>(player, main.playerlg.get(player.getName()).getVotes());\r\n\t\t\t\t\t\t\t\t\tvotes.add(se);\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).resetVotes();\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setVote(null);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\twhile (votes.size() != 1) {\r\n\t\t\t\t\t\t\t\t\tInteger i1 = votes.get(0).getValue();\r\n\t\t\t\t\t\t\t\t\tInteger i2 = votes.get(1).getValue();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (i1.compareTo(i2) > 0) {\r\n\t\t\t\t\t\t\t\t\t\tvotes.remove(1);\r\n\t\t\t\t\t\t\t\t\t} else if (i1.compareTo(i2) == 0) {\r\n\t\t\t\t\t\t\t\t\t\tint r = new Random().nextInt(2);\r\n\t\t\t\t\t\t\t\t\t\tif (r == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tvotes.remove(1);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tvotes.remove(0);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tvotes.remove(0);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tPlayer grailled = votes.get(0).getKey();\r\n\t\t\t\t\t\t\t\tPlayerLG grailledLG = main.playerlg.get(grailled.getName());\r\n\t\t\t\t\t\t\t\tint iVote = votes.get(0).getValue();\r\n\t\t\t\t\t\t\t\tif (iVote != 0) {\r\n\t\t\t\t\t\t\t\t\tgrailledLG.setLGTargeted(true);\r\n\t\t\t\t\t\t\t\t\tisGrailled = true;\r\n\t\t\t\t\t\t\t\t\tmain.sendRoleMessage(main.getPrefix() + main.SendArrow + \"§c§l\" + grailled.getName() + \" §ca été dévoré pendant cette nuit...\", Roles.LOUP_GAROU);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tfor (Player player : lgs) {\r\n\t\t\t\t\t\t\t\t\tif (!isGrailled)\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir. Vous ne vous délectez donc de personne cette nuit...\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().remove(Material.BOOK);\r\n\t\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isRole(Roles.GRAND_MECHANT_LOUP) || main.playerlg.get(player.getName()).isRole(Roles.LOUP_GAROU_BLANC) || main.playerlg.get(player.getName()).isRole(Roles.INFECT_PERE_DES_LOUPS))\r\n\t\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(false);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (grailledLG.isRole(Roles.ANCIEN)) {\r\n\t\t\t\t\t\t\t\t\tif (!grailledLG.hasUsedDefinitivePower()) {\r\n\t\t\t\t\t\t\t\t\t\tgrailledLG.setLGTargeted(false);\r\n\t\t\t\t\t\t\t\t\t\tgrailledLG.setUsedDefinitivePower(true);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (grailledLG.isRole(Roles.CHAPERON_ROUGE)) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\tif (main.playerlg.get(p.getName()).isRole(Roles.CHASSEUR)) {\r\n\t\t\t\t\t\t\t\t\t\t\tp.sendMessage(main.getPrefix() + main.SendArrow + \"§aVous avez protégé §c\" + grailled.getName() + \"§a cette nuit.\");\r\n\t\t\t\t\t\t\t\t\t\t\tgrailledLG.setLGTargeted(false);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (grailledLG.isRole(Roles.DUR_A_CUIRE)) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tgrailledLG.setDACDying();\r\n\t\t\t\t\t\t\t\t\tgrailledLG.setLGTargeted(false);\r\n\t\t\t\t\t\t\t\t\tgrailled.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez été attaqué cette nuit. Grâce à votre rôle et à vos muscles, vous survivez jusqu'au matin prochain.\");\r\n\t\t\t\t\t\t\t\t\tgrailled.playSound(grailled.getLocation(), Sound.ZOMBIE_HURT, 8, 1.5f);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t} else if (grailledLG.isRole(Roles.FILLE_DE_JOIE)) {\r\n\t\t\t\t\t\t\t\t\tif (!grailledLG.getOtherPlayerHouse().getName().equals(grailled.getName()))\r\n\t\t\t\t\t\t\t\t\t\tgrailledLG.setLGTargeted(false);\r\n\t\t\t\t\t\t\t\t} else if (grailledLG.isRole(Roles.HUMAIN_MAUDIT)) {\r\n\t\t\t\t\t\t\t\t\tif (!grailledLG.isCamp(RCamp.LOUP_GAROU)) {\r\n\t\t\t\t\t\t\t\t\t\tgrailled.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez été attaqué par les Loups cette nuit. Vous devenez donc l'un d'entre eux.\");\r\n\t\t\t\t\t\t\t\t\t\tLG.sendTitle(grailled, \"§cVous avez été attaqué cette nuit !\", \"§eVous devenez donc un Loup-Garou\", 5, 70, 5);\r\n\t\t\t\t\t\t\t\t\t\tmain.sendRoleMessage(main.getPrefix() + main.SendArrow + \"§c§l\" + grailled.getName() + \" §cest en fait humain maudit. Il se transforme donc un Loup-Garou suite à votre attaque.\", Roles.LOUP_GAROU);\r\n\t\t\t\t\t\t\t\t\t\tgrailledLG.setCamp(RCamp.LOUP_GAROU);\r\n\t\t\t\t\t\t\t\t\t\tgrailledLG.setLGTargeted(false);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (grailledLG.isRole(Roles.PORTEUR_DE_L$AMULETTE)) {\r\n\t\t\t\t\t\t\t\t\tgrailledLG.setLGTargeted(false);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\tif (main.playerlg.get(p.getName()).isRole(Roles.FILLE_DE_JOIE)) {\r\n\t\t\t\t\t\t\t\t\t\tPlayerLG plg = main.playerlg.get(p.getName());\r\n\t\t\t\t\t\t\t\t\t\tif (plg.getOtherPlayerHouse() != null) {\r\n\t\t\t\t\t\t\t\t\t\t\tPlayerLG oplg = main.playerlg.get(plg.getOtherPlayerHouse().getName());\r\n\t\t\t\t\t\t\t\t\t\t\tif (plg.getOtherPlayerHouse().equals(grailled)|| oplg.isCamp(RCamp.LOUP_GAROU) || oplg.isCamp(RCamp.LOUP_GAROU_BLANC))\r\n\t\t\t\t\t\t\t\t\t\t\t\tplg.setFDJDied(true);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.LOUP_GAROU);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentTimer == 28) {\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.LOUP_GAROU);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.INFECT_PERE_DES_LOUPS)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_IPDL);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 20;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour de l'\" + Roles.INFECT_PERE_DES_LOUPS.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.INFECT_PERE_DES_LOUPS)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.INFECT_PERE_DES_LOUPS).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tPlayer grailled = null;\r\n\t\t\t\t\t\t\tfor (Player p : main.players) if (main.playerlg.get(p.getName()).isLGTargeted()) grailled = p;\r\n\t\t\t\t\t\t\tif (grailled == null) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cLes loups n'ont dévoré personne.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedDefinitivePower() && !player.getInventory().contains(Material.STONE_BUTTON)) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) {\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.INFECT_PERE_DES_LOUPS.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, InventoryType.HOPPER, \"§6Inv \" + Roles.INFECT_PERE_DES_LOUPS.getDisplayName());\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tinv.setItem(0, main.config.getColoredItem(Material.STAINED_CLAY, 1, (short)5, \"§a§lInfecter §e\" + grailled.getName(), Arrays.asList(\"§7Infecter §e\" + grailled.getName() + \" §7lui fera rejoindre\", \"§7le camp des Loups-Garous.\", \"§7Cependant, il gardera ses pouvoirs de Villageois s'il en a.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tinv.setItem(4, main.config.getColoredItem(Material.STAINED_CLAY, 1, (short)14, \"§cNe §lpas§c infecter §e\" + grailled.getName(), Arrays.asList(\"§7N'infecte pas le joueur §e\" + grailled.getName() + \"§7.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tinv.setItem(2, getHeadItem(grailled, \"§e\" + grailled.getName(), Arrays.asList(\"§7Le joueur §e\" + grailled.getName() + \"§7 a été tué cette nuit.\", \"§7Voulez-vous §cl'infecter §7?\")));\r\n\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez déjà utilisé votre pouvoir.\");\r\n\t\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.INFECT_PERE_DES_LOUPS);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.INFECT_PERE_DES_LOUPS)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.INFECT_PERE_DES_LOUPS)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.INFECT_PERE_DES_LOUPS);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.GRAND_MECHANT_LOUP)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_GML);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 26;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.GRAND_MECHANT_LOUP.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.GRAND_MECHANT_LOUP)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.GRAND_MECHANT_LOUP).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.GRAND_MECHANT_LOUP.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.GRAND_MECHANT_LOUP.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(p.getName()).isCamp(RCamp.LOUP_GAROU) && !main.playerlg.get(p.getName()).isCamp(RCamp.LOUP_GAROU_BLANC)) {\r\n\t\t\t\t\t\t\t\t\t\t\tItemStack it = new ItemStack(Material.SKULL_ITEM, 1, (short)3);\r\n\t\t\t\t\t\t\t\t\t\t\tSkullMeta itm = (SkullMeta) it.getItemMeta();\r\n\t\t\t\t\t\t\t\t\t\t\titm.setOwner(p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\titm.setDisplayName(\"§c\" + p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\titm.setLore(Arrays.asList(\"§7Dévore le joueur §c\" + p.getName() + \"§7.\", \"§7Il sera éliminé de la partie.\", \"\", \"§b>>Clique pour sélectionner\"));\r\n\t\t\t\t\t\t\t\t\t\t\tit.setItemMeta(itm);\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(it);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 25) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(p.getName()).isCamp(RCamp.LOUP_GAROU) && !main.playerlg.get(p.getName()).isCamp(RCamp.LOUP_GAROU_BLANC))\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§4Vous avez 25 secondes pour dévorer un villageois. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.GRAND_MECHANT_LOUP);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.GRAND_MECHANT_LOUP)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.GRAND_MECHANT_LOUP)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.GRAND_MECHANT_LOUP);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.LOUP_GAROU_BLANC)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_LGB);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 26;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.LOUP_GAROU_BLANC.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.LOUP_GAROU_BLANC)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.LOUP_GAROU_BLANC).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tList<Player> lgs = new ArrayList<>();\r\n\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(p.getName()).isCamp(RCamp.LOUP_GAROU) || main.playerlg.get(p.getName()).isCamp(RCamp.LOUP_GAROU_BLANC))\r\n\t\t\t\t\t\t\t\t\tlgs.add(p);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (lgs.size() == 1) {\r\n\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cIl n'y a plus de loups à éliminer.\");\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.LOUP_GAROU_BLANC.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.LOUP_GAROU_BLANC.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Player p : lgs) {\r\n\t\t\t\t\t\t\t\t\t\tif (!p.getName().equals(player.getName())) {\r\n\t\t\t\t\t\t\t\t\t\t\tItemStack it = new ItemStack(Material.SKULL_ITEM, 1, (short)3);\r\n\t\t\t\t\t\t\t\t\t\t\tSkullMeta itm = (SkullMeta) it.getItemMeta();\r\n\t\t\t\t\t\t\t\t\t\t\titm.setOwner(p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\titm.setDisplayName(\"§c\" + p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\titm.setLore(Arrays.asList(\"§7Dévore le Loup-Garou §c\" + p.getName() + \"§7.\", \"§7Il sera éliminé de la partie.\", \"\", \"§b>>Clique pour sélectionner\"));\r\n\t\t\t\t\t\t\t\t\t\t\tit.setItemMeta(itm);\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(it);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (inv.getContents().length != 0) {\r\n\t\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 25) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : lgs)\r\n\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§4Vous avez 25 secondes pour tuer un Loup-Garou. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.LOUP_GAROU_BLANC);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.LOUP_GAROU_BLANC)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.LOUP_GAROU_BLANC)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.LOUP_GAROU_BLANC);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.PETITE_FILLE2)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_PF2);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 21;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour de la \" + Roles.PETITE_FILLE2.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.PETITE_FILLE2)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.PETITE_FILLE2).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.PETITE_FILLE2.getDisplayName())) {\r\n\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, InventoryType.HOPPER, \"§6Inv \" + Roles.PETITE_FILLE2.getDisplayName());\r\n\t\t\t\t\t\t\t\tinv.setItem(1, main.config.getColoredItem(Material.STAINED_CLAY, 1, (short)4, \"§eRegarder\", Arrays.asList(\"§7Observe le village cette nuit :\", \"§7il y a 20% de chance que vous trouviez un Loup.\", \"§7Mais également 5% de chance que vous mourrez.\")));\r\n\t\t\t\t\t\t\t\tinv.setItem(3, main.config.getColoredItem(Material.STAINED_CLAY, 1, (short)11, \"§cNe rien faire\", Collections.singletonList(\"§7N'observe pas le village cette nuit.\")));\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\tplayer.openInventory(inv);\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.PETITE_FILLE2);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.PETITE_FILLE2)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.PETITE_FILLE2)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.PETITE_FILLE2);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.SORCIERE)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_SOSO);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 31;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour de la \" + Roles.SORCIERE.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.SORCIERE)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.SORCIERE).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().startsWith(\"§6Inv \")) {\r\n\t\t\t\t\t\t\t\tPlayer grailled = null;\r\n\t\t\t\t\t\t\t\tfor (Player p : main.players) if (main.playerlg.get(p.getName()).isLGTargeted()) grailled = p;\r\n\t\t\t\t\t\t\t\tInventory binv = Bukkit.createInventory(null, InventoryType.BREWING, \"§6Inv \" + Roles.SORCIERE.getDisplayName());\r\n\t\t\t\t\t\t\t\tbinv.setItem(1, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (grailled != null)binv.setItem(3, getHeadItem(grailled, \"§c\" + grailled.getName(), Arrays.asList(\"§7En cette nuit§e, §c\" + grailled.getName() + \"§7 a été englouti par les loups.\", \"§7Vous pouvez le réssusciter et/ou tuer quelqu'un d'autre.\")));\r\n\t\t\t\t\t\t\t\tif (grailled == null)binv.setItem(3, main.getItem(Material.SKULL_ITEM, \"§cPersonne\", Arrays.asList(\"§7En cette nuit§e, personne n'a été attaqué.\", \"§7Vous pouvez tout de même tuer quelqu'un.\")));\r\n\t\t\t\t\t\t\t\tif (!main.SosoRezPots.get(player))binv.setItem(3, main.getItem(Material.BARRIER, \"§cPlus de potions\", Collections.singletonList(\"§cVous n'avez plus de potion pour §aréssusciter.\")));\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (grailled != null && main.SosoRezPots.get(player)) {\r\n\t\t\t\t\t\t\t\t\tPotion potrez = new Potion(PotionType.INSTANT_HEAL, 1);\r\n\t\t\t\t\t\t\t\t\tItemStack itrez = potrez.toItemStack(1);\r\n\t\t\t\t\t\t\t\t\tItemMeta itrezm = itrez.getItemMeta();\r\n\t\t\t\t\t\t\t\t\titrezm.addItemFlags(ItemFlag.HIDE_POTION_EFFECTS);\r\n\t\t\t\t\t\t\t\t\titrezm.setDisplayName(\"§aRéssusciter §c\" + grailled.getName());\r\n\t\t\t\t\t\t\t\t\titrezm.setLore(Arrays.asList(\"§7Réssuscite le joueur §c\" + grailled.getName() + \"§7.\", \"§7Il ne sera donc pas éliminé.\", \"\", \"§b>>Clique pour sélectionner\"));\r\n\t\t\t\t\t\t\t\t\titrez.setItemMeta(itrezm);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tbinv.setItem(0, itrez);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.SosoKillPots.get(player)) {\r\n\t\t\t\t\t\t\t\t\tPotion potkill = new Potion(PotionType.INSTANT_DAMAGE, 1);\r\n\t\t\t\t\t\t\t\t\tItemStack itkill = potkill.toItemStack(1);\r\n\t\t\t\t\t\t\t\t\tItemMeta itkillm = itkill.getItemMeta();\r\n\t\t\t\t\t\t\t\t\titkillm.addItemFlags(ItemFlag.HIDE_POTION_EFFECTS);\r\n\t\t\t\t\t\t\t\t\titkillm.setDisplayName(\"§4Tuer un joueur\");\r\n\t\t\t\t\t\t\t\t\titkillm.setLore(Arrays.asList(\"§7Tue un autre joueur de la partie.\", \"§7On le retrouvera mort au petit matin.\", \"\", \"§b>>Clique pour sélectionner\"));\r\n\t\t\t\t\t\t\t\t\titkill.setItemMeta(itkillm);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tbinv.setItem(2, itkill);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\tplayer.openInventory(binv);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.SORCIERE);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.SORCIERE)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.SORCIERE)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 20) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.SORCIERE);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.PRETRE)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_PRETRE);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 26;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.PRETRE.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.PRETRE)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.PRETRE).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedDefinitivePower() && !player.getInventory().contains(Material.STONE_BUTTON)) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.PRETRE.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.PRETRE.getDisplayName());\r\n\t\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\t\tif (!p.getName().equals(player.getName()))\r\n\t\t\t\t\t\t\t\t\t\t\t\tinv.addItem(getHeadItem(p, \"§f\" + p.getName(), Arrays.asList(\"§7Lance de l'eau bénite sur §f\" + p.getName() + \"§7.\", \"§7S'il est un Loup, il mourra, sinon, vous mourrez.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\t\tif (currentTimer == 25) {\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§eVous avez 25 secondes pour jeter de l'eau bénite sur quelqu'un. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 23)\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez déjà utilisé votre pouvoir.\");\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (currentTimer == 20) {\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.PRETRE);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.PRETRE)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.PRETRE)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.PRETRE);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.NECROMANCIEN)) {\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_NECRO);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 26;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.NECROMANCIEN.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.NECROMANCIEN)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.NECROMANCIEN).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedDefinitivePower() && !player.getInventory().contains(Material.STONE_BUTTON)) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tint morts = 0;\r\n\t\t\t\t\t\t\t\tfor (PlayerLG plg : main.playerlg.values())\r\n\t\t\t\t\t\t\t\t\tif (!plg.isVivant()) morts++;\r\n\t\t\t\t\t\t\t\tif (morts == 0) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cPersonne n'est encore mort.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.NECROMANCIEN.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.NECROMANCIEN.getDisplayName());\r\n\t\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (main.playerlg.get(p.getName()).isVivant() || !main.playerlg.get(p.getName()).isCamp(RCamp.VILLAGE)) continue;\r\n\t\t\t\t\t\t\t\t\t\t\tItemStack it = new ItemStack(Material.SKULL_ITEM, 1, (short)3);\r\n\t\t\t\t\t\t\t\t\t\t\tSkullMeta itm = (SkullMeta) it.getItemMeta();\r\n\t\t\t\t\t\t\t\t\t\t\titm.setOwner(p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\titm.setDisplayName(\"§b\" + p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\titm.setLore(Arrays.asList(\"§7Réssusciter le joueur §b\" + p.getName() + \"§7. S'il avait un pouvoir\", \"§7il les perdras et deviendra Simple Villageois.\"));\r\n\t\t\t\t\t\t\t\t\t\t\tit.setItemMeta(itm);\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(it);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\t\tif (currentTimer == 25) {\r\n\t\t\t\t\t\t\t\t\t\tfakeplayers.put(player, new ArrayList<>());\r\n\t\t\t\t\t\t\t\t\t\tfor (PlayerLG plg : main.playerlg.values())\r\n\t\t\t\t\t\t\t\t\t\t\tif (!plg.isVivant() && plg.isCamp(RCamp.VILLAGE) && Bukkit.getOnlinePlayers().contains(plg.player)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tPlayer p = plg.player;\r\n\t\t\t\t\t\t\t\t\t\t\t\tLocation loc = new Location(plg.getBlock().getWorld(), plg.getBlock().getX()+0.5, plg.getBlock().getY() + 1, plg.getBlock().getZ()+0.5, 0f, 0f);\r\n\t\t\t\t\t\t\t\t\t\t\t\tWorldServer s = ((CraftWorld) loc.getWorld()).getHandle();\r\n\t\t\t\t\t\t\t\t\t\t\t    World w = ((CraftWorld) p.getWorld()).getHandle();\r\n\t\t\t\t\t\t\t\t\t\t\t    String[] prop;\r\n\t\t\t\t\t\t\t\t\t\t\t    prop = textures(p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\t    GameProfile gp = new GameProfile(p.getUniqueId(), p.getName());\r\n\t\t\t\t\t\t\t\t\t\t\t    gp.getProperties().put(\"textures\", new Property(\"textures\",prop[0],prop[1]));\r\n\t\t\t\t\t\t\t\t\t\t\t    EntityPlayer c = new EntityPlayer(MinecraftServer.getServer(), s, gp, new PlayerInteractManager(w));\r\n\t\t\t\t\t\t\t\t\t\t\t    loc = loc.setDirection(player.getLocation().subtract(loc).toVector());\r\n\t\t\t\t\t\t\t\t\t\t\t\tc.setLocation(loc.getX(), loc.getY(), loc.getZ(), loc.getYaw(), loc.getPitch());\r\n\t\t\t\t\t\t\t\t\t\t\t    byte flags = (byte) 0xFF;\r\n\t\t\t\t\t\t\t\t\t\t\t    c.getDataWatcher().watch(10,  flags);\r\n\t\t\t\t\t\t\t\t\t\t\t    PacketPlayOutPlayerInfo pi = new PacketPlayOutPlayerInfo(EnumPlayerInfoAction.ADD_PLAYER, c);\r\n\t\t\t\t\t\t\t\t\t\t\t    PacketPlayOutNamedEntitySpawn spawn = new PacketPlayOutNamedEntitySpawn(c);\r\n\t\t\t\t\t\t\t\t\t\t\t    PlayerConnection co = ((CraftPlayer) player).getHandle().playerConnection;\r\n\t\t\t\t\t\t\t\t\t\t\t    float yaw = loc.getYaw();\r\n\t\t\t\t\t\t\t\t\t            float pitch = loc.getPitch();\r\n\t\t\t\t\t\t\t\t\t\t\t    co.sendPacket(pi);\r\n\t\t\t\t\t\t\t\t\t\t\t    co.sendPacket(spawn);\r\n\t\t\t\t\t\t\t\t\t\t\t    co.sendPacket(new PacketPlayOutEntity.PacketPlayOutEntityLook(c.getId(), (byte) ((yaw%360.)*256/360), (byte) ((pitch%360.)*256/360), false));\r\n\t\t\t\t\t\t\t\t\t            co.sendPacket(new PacketPlayOutEntityHeadRotation(c, (byte) ((yaw%360.)*256/360)));\r\n\t\t\t\t\t\t\t\t\t\t\t    fakeplayers.get(player).add(c);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§bVous avez 25 secondes pour réssusciter quelqu'un. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 24)\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez déjà utilisé votre pouvoir.\");\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (currentTimer == 21) {\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (fakeplayers.containsKey(player)) {\r\n\t\t\t\t\t\t\t\t\tfor (EntityPlayer e : fakeplayers.get(player)) {\r\n\t\t\t\t\t\t\t\t\t\tPlayerConnection connection = ((CraftPlayer) player).getHandle().playerConnection;\r\n\t\t\t\t\t\t\t\t\t\tconnection.sendPacket(new PacketPlayOutPlayerInfo(PacketPlayOutPlayerInfo.EnumPlayerInfoAction.REMOVE_PLAYER, e));\r\n\t\t\t\t\t\t\t\t\t\tconnection.sendPacket(new PacketPlayOutEntityDestroy(e.getId()));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tfakeplayers.remove(player);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.NECROMANCIEN);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.NECROMANCIEN)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.NECROMANCIEN)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.NECROMANCIEN);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.VILAIN_GARCON)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_VG);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 26;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.VILAIN_GARCON.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.VILAIN_GARCON)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.VILAIN_GARCON).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedDefinitivePower() && !player.getInventory().contains(Material.STONE_BUTTON)) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.VILAIN_GARCON.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.VILAIN_GARCON.getDisplayName());\r\n\t\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\t\tif (!p.getName().equals(player.getName()))\r\n\t\t\t\t\t\t\t\t\t\t\t\tinv.addItem(getHeadItem(p, \"§b\" + p.getName(), Arrays.asList(\"§7Sélectionne §b\" + p.getName() + \"§7.\", \"§7En sélectionnant une autre personne,\", \"§7ils échangeront leurs rôles.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\t\tif (currentTimer == 25) {\r\n\t\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§bVous avez 25 secondes pour échanger les rôles de deux personnes. Pour faire cela, il suffit de cliquer sur les joueurs voulus.\");\r\n\t\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 23)\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez déjà utilisé votre pouvoir.\");\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (currentTimer == 20) {\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.VILAIN_GARCON);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.VILAIN_GARCON)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.VILAIN_GARCON)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.VILAIN_GARCON);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.DICTATEUR)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_DICTA);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 21;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.DICTATEUR.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.DICTATEUR)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.DICTATEUR).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedDefinitivePower()) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.DICTATEUR.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, InventoryType.HOPPER, \"§6Inv \" + Roles.DICTATEUR.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(1, main.config.getColoredItem(Material.STAINED_CLAY, 1, (short)5, \"§aFaire un coup d'état\", Arrays.asList(\"§7Fait un coup d'état :\", \"§7vous serez le seul à pouvoir voter au jour prochain.\", \"§7Si vous votez un §c§lLoup§7, vous obtiendrez le rôle de maire, sinon,\", \"§7si vous votez, un villageois, vous vous suiciderez.\")));\r\n\t\t\t\t\t\t\t\t\tinv.setItem(3, main.config.getColoredItem(Material.STAINED_CLAY, 1, (short)14, \"§cNe rien faire\", Collections.singletonList(\"§7Ne fait pas de coup d'état.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (currentTimer == 18)\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez déjà utilisé votre pouvoir.\");\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.DICTATEUR);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.DICTATEUR)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.DICTATEUR)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.DICTATEUR);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.MAMIE_GRINCHEUSE)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_MAMIE);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 21;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour de la \" + Roles.MAMIE_GRINCHEUSE.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.MAMIE_GRINCHEUSE)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.MAMIE_GRINCHEUSE).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.MAMIE_GRINCHEUSE.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.MAMIE_GRINCHEUSE.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tif (!p.getName().equals(player.getName()))\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(getHeadItem(p, \"§d\" + p.getName(), Arrays.asList(\"§7Interdire à §d\" + p.getName() + \"§7le pouvoir de voter pour un tour.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 20) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§dVous avez 20 secondes pour retirer le droit de vote à quelqu'un pour un tour. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.MAMIE_GRINCHEUSE);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.MAMIE_GRINCHEUSE)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.MAMIE_GRINCHEUSE)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.MAMIE_GRINCHEUSE);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.CORBEAU)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_CORBEAU);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 23;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.CORBEAU.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.CORBEAU)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.CORBEAU).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.CORBEAU.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.CORBEAU.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\tif (!p.getName().equals(player.getName())) {\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(getHeadItem(p, \"§f\" + p.getName(), Arrays.asList(\"§7Rendre visite à §f\" + p.getName() + \"§7.\", \"§7Il recevra 2 votes au début du prochain jour.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 22) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§fVous avez 22 secondes pour rendre visite à quelqu'un. Pour faire cela, il suffit de cliquer sur le joueur voulu.\");\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.CORBEAU);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.CORBEAU)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.CORBEAU)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 15) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.CORBEAU);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.JOUEUR_DE_FLUTE)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_JDF);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 31;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.JOUEUR_DE_FLUTE.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.JOUEUR_DE_FLUTE)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.JOUEUR_DE_FLUTE).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.JOUEUR_DE_FLUTE.getDisplayName())) {\r\n\t\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, 27, \"§6Inv \" + Roles.JOUEUR_DE_FLUTE.getDisplayName());\r\n\t\t\t\t\t\t\t\t\tinv.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players) {\r\n\t\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(p.getName()).isCharmed() && !p.getName().equals(player.getName())) {\r\n\t\t\t\t\t\t\t\t\t\t\tinv.addItem(getHeadItem(p, \"§d\" + p.getName(), Collections.singletonList(\"§7Charme le joueur §d\" + p.getName() + \"§7.\")));\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (!main.playerlg.get(player.getName()).hasUsedPower()) setWake(player);\r\n\t\t\t\t\t\t\t\tif (currentTimer == 30) {\r\n\t\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\t\tif (!main.playerlg.get(p.getName()).isCharmed())\r\n\t\t\t\t\t\t\t\t\t\t\tplayer.showPlayer(p);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§5Vous avez 30 secondes pour charmer 2 personnes. Pour faire cela, il suffit de cliquer sur les joueurs voulus.\");\r\n\t\t\t\t\t\t\t\t\tplayer.getInventory().setItem(8, main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.JOUEUR_DE_FLUTE);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.JOUEUR_DE_FLUTE)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.JOUEUR_DE_FLUTE)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 20) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.JOUEUR_DE_FLUTE);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.PYROMANE)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_PYRO);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 31;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour du \" + Roles.PYROMANE.getDisplayName());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!main.RolesVoleur.contains(Roles.PYROMANE)) {\r\n\t\t\t\t\t\t\tPlayer player = main.getPlayersByRole(Roles.PYROMANE).get(currentPlayerInPlayerList);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isNoctaTargeted()) {\r\n\t\t\t\t\t\t\t\tcurrentTimer = 0;\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv \" + Roles.PYROMANE.getDisplayName()) && !player.getInventory().contains(Material.STONE_BUTTON)) {\r\n\t\t\t\t\t\t\t\tInventory inv = Bukkit.createInventory(null, InventoryType.HOPPER, \"§6Inv \" + Roles.PYROMANE.getDisplayName());\r\n\t\t\t\t\t\t\t\tinv.setItem(2, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tinv.setItem(0, main.getItem(Material.LAVA_BUCKET, \"§6Mettre de l'essence sur 2 joueurs\", Arrays.asList(\"§7Sélectionner 2 joueurs qui\", \"§7seront recouvert d'essence jusqu'à la fin de la partie.\", \"\", \"§b>>Clique pour sélectionner\")));\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tList<String> lore = new ArrayList<>();\r\n\t\t\t\t\t\t\t\tlore.add(\"§7Tuer tous les joueurs qui sont couvert d'essence.\");\r\n\t\t\t\t\t\t\t\tfor (PlayerLG plg : main.playerlg.values())\r\n\t\t\t\t\t\t\t\t\tif (plg.isHuile() && plg.isVivant())\r\n\t\t\t\t\t\t\t\t\t\tlore.add(\"§e\" + main.getPlayerNameByAttributes(plg.player, player));\r\n\t\t\t\t\t\t\t\tif (lore.size() != 1)\r\n\t\t\t\t\t\t\t\t\tlore.set(0, \"§7Liste des joueurs huilés §6(§e\" + (lore.size() - 1) + \"§6)§7 :\");\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\tlore.set(0, \"§7Il n'y a actuellement §caucun §7joueur huilé.\");\r\n\t\t\t\t\t\t\t\tlore.add(\"\");\r\n\t\t\t\t\t\t\t\tlore.add(\"§b>>Clique pour sélectionner\");\r\n\t\t\t\t\t\t\t\tinv.setItem(4, main.getItem(Material.FLINT_AND_STEEL, \"§6Faire brôler les joueurs huilés\", lore));\r\n\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t\tplayer.openInventory(inv);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (!player.getOpenInventory().getTopInventory().getName().equalsIgnoreCase(\"§6Inv Choose\" + Roles.PYROMANE.getName()) && main.isType(Gtype.LIBRE) && player.getInventory().contains(Material.STONE_BUTTON)) {\r\n\t\t\t\t\t\t\t\tInventory invPyro = Bukkit.createInventory(null, 27, \"§6Inv Choose\" + Roles.PYROMANE.getName());\r\n\t\t\t\t\t\t\t\tfor (Player p : main.players)\r\n\t\t\t\t\t\t\t\t\tif (!p.equals(player))\r\n\t\t\t\t\t\t\t\t\t\tinvPyro.addItem(NightRunnable.getHeadItem(p, \"§6\" + p.getName(), Arrays.asList(\"§7Recouvre §6\" + p.getName() + \" §7d'essence.\", \"§7Il saura qu'il a été huilé.\")));\r\n\t\t\t\t\t\t\t\tinvPyro.setItem(26, main.getItem(Material.BARRIER, \"§c§lAnnuler\", Collections.singletonList(\"§7N'effectue pas l'action en cours.\")));\r\n\t\t\t\t\t\t\t\tplayer.openInventory(invPyro);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).hasUsedPower()) currentTimer = 0;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\tplayer.getInventory().remove(Material.STONE_BUTTON);\r\n\t\t\t\t\t\t\t\tboolean isChoosed = main.playerlg.get(player.getName()).hasUsedPower();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (!isChoosed) {\r\n\t\t\t\t\t\t\t\t\tplayer.sendMessage(main.getPrefix() + main.SendArrow + \"§cVous avez mit trop de temps à choisir.\");\r\n\t\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.PYROMANE);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.PYROMANE)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (currentPlayerInPlayerList + 1 == main.AliveRoles.get(Roles.PYROMANE)) {\r\n\t\t\t\t\t\t\t\tif (currentTimer == 20) {\r\n\t\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.PYROMANE);\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.SOEUR)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_SOEUR);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 36;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tList<Player> soeurs = new ArrayList<>();\r\n\t\t\t\t\t\tint ps = 0;\r\n\t\t\t\t\t\twhile (soeurs.size() != 1) {\r\n\t\t\t\t\t\t\tPlayer player = main.players.get(ps);\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isRole(Roles.SOEUR) && !main.playerlg.get(player.getName()).hasUsedPower() && !main.playerlg.get(player.getName()).isNoctaTargeted()) soeurs.add(player);\r\n\t\t\t\t\t\t\tps++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsoeurs.add(main.playerlg.get(soeurs.get(0).getName()).getsoeur().get(0));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour des \" + Roles.SOEUR.getDisplayName() + \"s\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor (Player player : soeurs) {\r\n\t\t\t\t\t\t\tif (main.sleepingPlayers.contains(player)) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tplayer.showPlayer(main.playerlg.get(player.getName()).getsoeur().get(0));\r\n\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (Player player : soeurs) {\r\n\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.SOEUR);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.SOEUR)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\telse if (main.CalledRoles.get(0).equals(Roles.FRERE)) {\r\n\r\n\t\t\t\t\tif (currentTimer == Integer.MAX_VALUE) {\r\n\t\t\t\t\t\tmain.setDisplayState(DisplayState.NUIT_FRERE);\r\n\t\t\t\t\t\tSystem.out.println(main.getDisplayState().name());\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcurrentTimer = 36;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tList<Player> freres = new ArrayList<>();\r\n\t\t\t\t\t\tint ps = 0;\r\n\t\t\t\t\t\twhile (freres.size() != 1) {\r\n\t\t\t\t\t\t\tPlayer player = main.players.get(ps);\r\n\t\t\t\t\t\t\tif (main.playerlg.get(player.getName()).isRole(Roles.FRERE) && !main.playerlg.get(player.getName()).hasUsedPower() && !main.playerlg.get(player.getName()).isNoctaTargeted()) freres.add(player);\r\n\t\t\t\t\t\t\tps++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfreres.add(main.playerlg.get(freres.get(0).getName()).getfrere().get(0));\r\n\t\t\t\t\t\tfreres.add(main.playerlg.get(freres.get(0).getName()).getfrere().get(1));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tLG.sendActionBarForAllPlayers(main.getPrefix() + main.SendArrow + \"§fAu tour des \" + Roles.FRERE.getDisplayName() + \"s\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor (Player player : freres) {\r\n\t\t\t\t\t\t\tif (main.sleepingPlayers.contains(player)) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsetWake(player);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (currentTimer == 0) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tfor (Player player : freres) {\r\n\t\t\t\t\t\t\t\tmain.playerlg.get(player.getName()).setHasUsedPower(true);\r\n\t\t\t\t\t\t\t\tplayer.closeInventory();\r\n\t\t\t\t\t\t\t\tsetSleep(player);\r\n\t\t\t\t\t\t\t\tmain.CalledRoles.remove(Roles.FRERE);\r\n\t\t\t\t\t\t\t\tcurrentTimer = Integer.MAX_VALUE;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.isEmpty()) return;\r\n\t\t\t\t\t\t\t\tif (main.CalledRoles.get(0).equals(Roles.FRERE)) {\r\n\t\t\t\t\t\t\t\t\tcurrentPlayerInPlayerList++;\r\n\t\t\t\t\t\t\t\t} else currentPlayerInPlayerList = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tfor (Player player : Bukkit.getOnlinePlayers()) {\r\n\t\t\t\t\tif (currentTimer != Integer.MAX_VALUE) player.setLevel(currentTimer);\r\n\t\t\t\t}\r\n\t\t\t\tif (currentTimer != Integer.MAX_VALUE) currentTimer--;\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate void setSleep(Player player) {\r\n\t\tif (main.isType(Gtype.LIBRE)) {\r\n\t\t\tBlock b = main.playerlg.get(player.getName()).getBlock();\r\n\t\t\tBlock block = Bukkit.getWorld(\"LG\").getBlockAt(b.getX(), b.getY(), b.getZ());\r\n\r\n\t\t\tplayer.closeInventory();\r\n\t\t\tplayer.teleport(block.getLocation());\r\n\t\t\t((CraftPlayer) player).getHandle().a(new BlockPosition(b.getX(), b.getY(), b.getZ()));\r\n\t\t\tplayer.setSleepingIgnored(false);\r\n\t\t}\r\n\t\tif (player.hasPotionEffect(PotionEffectType.NIGHT_VISION))\r\n\t\t\tplayer.removePotionEffect(PotionEffectType.NIGHT_VISION);\r\n\t\tplayer.addPotionEffect(new PotionEffect(PotionEffectType.BLINDNESS, Integer.MAX_VALUE, 2, false, false));\r\n\r\n\t\tmain.players.forEach(player::hidePlayer);\r\n\t\tif (player.getInventory().contains(main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")))) player.getInventory().remove(main.getItem(Material.BARRIER, \"§cAnnuler\", Collections.singletonList(\"§7Annule l'action en cours.\")));\r\n\t\tif (!main.sleepingPlayers.contains(player)) main.sleepingPlayers.add(player);\r\n\t}\r\n\t\r\n\tpublic void setWake(Player player) {\r\n\t\tplayer.closeInventory();\r\n\t\tif (main.isType(Gtype.LIBRE)) player.damage(0.1);\r\n\t\tmain.sleepingPlayers.remove(player);\r\n\t\tif (player.hasPotionEffect(PotionEffectType.BLINDNESS))\r\n\t\t\tplayer.removePotionEffect(PotionEffectType.BLINDNESS);\r\n\t\tplayer.addPotionEffect(new PotionEffect(PotionEffectType.NIGHT_VISION, Integer.MAX_VALUE, 0, false, false));\r\n\t\tif (main.isType(Gtype.REUNION) && !main.isDisplayState(DisplayState.NUIT_NECRO)) {\r\n\t\t\tfor (Player p : main.players)\r\n\t\t\t\tplayer.showPlayer(p);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static ItemStack getHeadItem(Player player, String name, List<String> lore) {\r\n\t\tItemStack it = new ItemStack(Material.SKULL_ITEM, 1, (short)3);\r\n\t\tSkullMeta itm = (SkullMeta)it.getItemMeta();\r\n\t\titm.setOwner(player.getName());\r\n\t\titm.setDisplayName(name);\r\n\t\titm.setLore(lore);\r\n\t\tit.setItemMeta(itm);\r\n\t\t\r\n\t\treturn it;\r\n\t}\r\n\r\n\t\r\n\t\r\n    public static String[] textures(String name) {\r\n        try {\r\n        URL url_0 = new URL(\"https://api.mojang.com/users/profiles/minecraft/\" + name);\r\n        InputStreamReader reader_0 = new InputStreamReader(url_0.openStream());\r\n     \r\n        String uuid = new JsonParser().parse(reader_0).getAsJsonObject().get(\"id\").getAsString();\r\n        URL url_1 = new URL(\"https://sessionserver.mojang.com/session/minecraft/profile/\" + uuid + \"?unsigned=false\");\r\n        InputStreamReader reader_1 = new InputStreamReader(url_1.openStream());\r\n     \r\n        JsonObject textureProperty = new JsonParser().parse(reader_1).getAsJsonObject().get(\"properties\").getAsJsonArray().get(0).getAsJsonObject();\r\n        String texture = textureProperty.get(\"value\").getAsString();\r\n        String signature = textureProperty.get(\"signature\").getAsString();\r\n        return new String[]{texture,signature};\r\n        }catch(IOException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n   }\r\n    \r\n}\r\n
===================================================================
diff --git a/src/fr/neyuux/lgthierce/task/NightRunnable.java b/src/fr/neyuux/lgthierce/task/NightRunnable.java
--- a/src/fr/neyuux/lgthierce/task/NightRunnable.java	
+++ b/src/fr/neyuux/lgthierce/task/NightRunnable.java	
@@ -1121,7 +1121,6 @@
 							Player player = main.getPlayersByRole(Roles.PACIFISTE).get(currentPlayerInPlayerList);
 
 							if (!main.playerlg.get(player.getName()).hasUsedDefinitivePower() || player.getInventory().contains(Material.STONE_BUTTON)) {
-
 								if (main.playerlg.get(player.getName()).isNoctaTargeted()) {
 									currentTimer = 0;
 									main.playerlg.get(player.getName()).setHasUsedPower(true);
